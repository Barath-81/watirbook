## Mac OS X 10.5

![Mac OS X 10.5 default desktop](https://github.com/zeljkofilipin/watirbook/raw/master/images/installation/mac-10-5/desktop.png)\

*Mac OS X 10.5 default desktop*

Machine is a clean installation of Mac OS X 10.5.8, fully patched, with 4 GB RAM. Safari 5.0.6, Firefox 5.0.1, Chrome 12, Opera 11.50. All browsers are English (US) version.

### Ruby

Regarding installing Ruby on Mac, I have good news and bad news. Good news is that Ruby is already installed by default, so you can skip this step if you just want to try Watir. Bad news is that you have an old version of Ruby installed. It will be good enough for trying Watir, but if you decide you want to use it, you will probably want to install a newer version of Ruby. So, for now, I will skip Ruby installation. I will cover it later.

To check if Ruby is installed on your Mac, open Terminal application (located in `/Applications/Utilities`) any type `ruby -v`:

    $ ruby -v
    ruby 1.8.6 (2009-06-08 patchlevel 369) [universal-darwin9.0]

Ruby 1.8.6 is pretty old, as the date says (2009). Does not matter at the moment, you can install newer version of Ruby later.

### RubyGems

With RubyGems, the same story as with Ruby. It is already installed, but an old version. Let's see which version is here with `gem -v`:

    $ gem -v
    1.0.1

RubyGems 1.0.1 is pretty old. Watir needs never version. Fortunately, it should be easy to upgrade RubyGems with `sudo gem update --system`:

    $ sudo gem update --system
    (...)
    Updating RubyGems...
    ERROR:  While executing gem ... (Gem::RemoteSourceException)
    HTTP Response 302 fetching http://gems.rubyforge.org/yaml

Now you see why I said "should be easy". RubyGems 1.0.1 is so old, it could not even be updated the easy way. See how lucky you are to have this book? Of course there is a way to upgrade to the newer version of RubyGems. The latest version I could install or Ruby 1.8.6 is RubyGems 1.4.2. Download [rubygems-update 1.4.2 gem] (click *Download* link), open Terminal window in folder where you have downloaded it (`/Users/zeljko/Downloads` in my case) and install it:

    $ sudo gem install -l rubygems-update-1.4.2.gem
    Successfully installed rubygems-update-1.4.2
    1 gem installed
    Installing ri documentation for rubygems-update-1.4.2...
    Installing RDoc documentation for rubygems-update-1.4.2...

    $ sudo update_rubygems
    RubyGems 1.4.2 installed
    File not found: README

Ignore `File not found: README`. Check if RubyGems is updated:

    $ gem -v
    1.4.2

Everything is as it should be.

[rubygems-update 1.4.2 gem]: https://rubygems.org/gems/rubygems-update/versions/1.4.2

### Xcode 3.1

You will need Xcode from Apple for watir-webdriver and safariwatir gems.

The easiest way to install Xcode is from Mac OS DVD. Insert the DVD, go to *Optional Installs/Xcode Tools* folder and double click *XcodeTools* file. Leave all settings at default values.

![Install Xcode 3.1.2 from Mac OS DVD](https://github.com/zeljkofilipin/watirbook/raw/master/images/installation/mac-10-5/xcode.png)\

*Install Xcode 3.1.2 from Mac OS DVD*

Optionally, after Xcode is installed, run Software Update. At the moment, there is no update.

### Xcode 3.2 and 4

If you do not have Mac OS DVD, you can get [Xcode] 3.2 and 4 from Apple web site. Unfortunately, none of them works on Mac OS 10.5. I could not find where you could download Xcode 3.1.

[Xcode]: http://developer.apple.com/xcode/

### watir-webdriver

The first gem we will install is watir-webdriver. For now it can drive Firefox, Chrome and Opera on Mac. Soon it should also be able to drive Safari. Install it with `sudo gem install watir-webdriver --no-ri --no-rdoc`.

    $ sudo gem install watir-webdriver --no-ri --no-rdoc
    (...)
    Successfully installed watir-webdriver-0.2.6
    (...)

To drive [Firefox], [Chrome] or [Opera] make sure you have them installed.

### Firefox with watir-webdriver

Let's try to drive Firefox! Open our old friend IRB and type this:

    $ irb

    > require "rubygems"
    => false

    > require "watir-webdriver"
    => true

    > browser = Watir::Browser.new :ff
    Selenium::WebDriver::Error::WebDriverError: unable to start Firefox cleanly, args: ["-silent"]

Uh oh. Problems. Looks like I am not the only one: https://github.com/jnicklas/capybara/issues/313 Will play with it later.

### Chrome with watir-webdriver

Let's see if it can really drive Chrome too. Just continue typing in IRB:

    > browser = Watir::Browser.new :chrome
    Selenium::WebDriver::Error::WebDriverError: Unable to find the chromedriver executable. Please download the server from http://code.google.com/p/chromium/downloads/list and place it somewhere on your PATH. More info at http://code.google.com/p/selenium/wiki/ChromeDriver.

Looks like we have to install something called chromedriver executable. Fortunately, the error message is pretty clear. Download `chromedriver_mac_14.0.813.0.zip` (ChromeDriver server for Mac OS X) from http://code.google.com/p/chromium/downloads/list and unzip it (with mouse doubleclick, for example). You will get a file named `chromedriver`. Put it "somewhere on your PATH", as the error message said. If you have no idea what that means, read on. To find out where to put `chromedriver` file, type this in Terminal:

    $ echo $PATH
    /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin

So, in my case, these folders are on my PATH: `/usr/bin`, `/bin`, `/usr/sbin`, `/sbin`, `/usr/local/bin` and `/usr/X11/bin`. `usr/bin` looks like a good place to put `chromedriver` file. To open the folder, go to *Finder > Go > Go to Folder > /usr/bin > Go*. You will have to provide admin password.

Open new Terminal window and try to drive Chrome:

    $ irb

    > require "rubygems"
    => false

    > require "watir-webdriver"
    => true

    > browser = Watir::Browser.new :chrome
    => #<Watir::Browser:0x12d610c url="about:blank" title="about:blank">

    > browser.goto "watir.com"
    => "http://watir.com/"

Finally! It works!

![watir-webdriver driving Chrome 12 on Mac OS 10.5](https://github.com/zeljkofilipin/watirbook/raw/master/images/installation/mac-10-5/webdriver-chrome.png)\

*watir-webdriver driving Chrome 12 on Mac OS 10.5*

### Opera with watir-webdriver

Let's see how it drives Opera. You can continue typing in already opened IRB:

    > browser = Watir::Browser.new :opera
    Selenium::WebDriver::Error::WebDriverError: Unable to find the Selenium server jar.  Please download the standalone server from http://code.google.com/p/selenium/downloads/list and set the SELENIUM_SERVER_JAR environmental variable to its location.  More info at http://code.google.com/p/selenium/wiki/OperaDriver.

Error message similar to the one when we first tried to open Chrome. The solution is similar too. We have to download a file, put it somewhere and point a variable to it. Do not worry, it sounds more complicated than it really is. Fortunately again, the error message says it all. Go to http://code.google.com/p/selenium/downloads/list and download `selenium-server-standalone-2.1.0.jar`. Since I have put `chromedriver` file in `/usr/bin`, I will put `selenium-server-standalone-2.1.0.jar` file there too.

The last step is setting SELENIUM_SERVER_JAR environmental variable. Create (if the file does not exist) or edit `.bash_profile` file in your home folder (`/Users/zeljko` in my case) with your favorite text editor. Add this line to the file:

     export SELENIUM_SERVER_JAR=/usr/bin/selenium-server-standalone-2.1.0.jar

If you just got lost, I have step by step guide how to do it. Open new Terminal tab or window and type `nano .bash_profile`:

    $ nano .bash_profile

GNU nano text editor will open. Type `export SELENIUM_SERVER_JAR=/usr/bin/selenium-server-standalone-2.1.0.jar`. Exit GNU nano and save the file with *control+x*, press *y* when it asks `Save modified buffer (ANSWERING "No" WILL DESTROY CHANGES) ?` and press *Enter* when it displays `Save modified buffer (ANSWERING "No" WILL DESTROY CHANGES) ?`.

![GNU nano asking should it save changes to `.bash_profile` file](https://github.com/zeljkofilipin/watirbook/raw/master/images/installation/mac-10-5/nano.png)\

*GNU nano asking should it save changes to `.bash_profile` file*

 If you have done everything right, GNU nano will close and you will see normal Terminal window. We can check if the line is written to `.bash_profile` file:

    $ cat .bash_profile
    export SELENIUM_SERVER_JAR=/usr/bin/selenium-server-standalone-2.1.0.jar

Let's drive Opera, finally!

    $ irb

    > require "rubygems"
    => false

    > require "watir-webdriver"
    => true

    > browser = Watir::Browser.new :opera
    RuntimeError: remote server not launched in 30 seconds

No luck today, will try later.

[Chrome]: http://www.google.com/chrome/
[Firefox]: http://www.mozilla.com/en-US/firefox/new/
[Opera]: http://www.opera.com/

### Safari with safariwatir

Safari is installed by default on Mac OS X, so you do not have to install it. You do have to install Xcode 3 (see previous chapters).

    $ sudo gem install safariwatir --no-ri --no-rdoc
    (...)
    Successfully installed safariwatir-0.4.0
    (...)

Let's try safariwatir. Open IRB:

    $ irb
    >>

Require RubyGems and safariwatir gem:

    require "rubygems"
    => false
    require "safariwatir"
    => true

Open Safari browser:

    browser = Watir::Safari.new
    => #<Watir::Safari:0x10116fc68 @scripter=#<Watir::AppleScripter:0x10116fbf0 @js=#<Watir::JavaScripter:0x10116fc18>, @typing_lag=0.08, @app=app("/Applications/Safari.app"), @document=app("/Applications/Safari.app").documents[1], @appname="Safari">>

Go to watir.com:

    browser.goto "http://watir.com"
    => nil

It works! :)

![safariwatir gem driving Safari 5 on Mac OS 10.5](https://github.com/zeljkofilipin/watirbook/raw/master/images/installation/mac-10-5/safariwatir.png)\

*safariwatir gem driving Safari 5 on Mac OS 10.5*

\newpage

